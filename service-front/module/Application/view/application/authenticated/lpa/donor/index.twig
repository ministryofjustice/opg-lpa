{% extends 'layout/accordion-layout.twig' %}

{%- set pageTitle = 'Who is the donor for this LPA?' -%}

{% block content %}

{% import "application/macros.twig" as macros %}

<li id="donor-section" class="section current" data-cy="section-current">

    <h1 class="heading-medium accordion-header flush--top">{{ pageTitle }}</h1>

    <div class="accordion-info">
        <div class="text">
            <p>The 'donor' is the person appointing other people to make decisions on their behalf. The donor:</p>

            <ul class="list list-bullet">
                <li>must be 18 or over</li>
                <li>must be able to make their own decisions at the time their LPA is made â€“ this is known as having <a href="/guide#topic-mental-capacity" class="js-guidance" data-analytics-click="page:link:help: Find out more about mental capacity">mental capacity</a></li>
            </ul>

            <p>Only the donor can make decisions about their LPA and the people to involve.</p>

            <p>
                <a href="/guide#topic-donor" class="js-guidance" data-analytics-click="page:link:help: Find out more about being a donor">Find out more about being a donor</a>
            </p>
        </div>
    </div>

    {% if (lpa.document.donor) %}

        <h2 class="heading-medium flush--top">The donor</h2>

        <div class="person person--wider">
            <h3 class="person-name heading-small flush--ends">{{ lpa.document.donor.name }}</h3>
            <p class="person-address flush--ends">{{ lpa.document.donor.address }}</p>
            <ul class="person-actions">
                <li class="action-item">
                    <a href="{{ editUrl }}" role="button" class="action-edit js-form-popup"  data-cy="view-change-donor" aria-label="View/Change Donor">View/Change<span class="visually-hidden"> Donor</span></a>
                </li>
            </ul>
        </div>

        <div class="form-group">
            <a href="{{ nextUrl }}" role="button" class="button" data-cy="save-and-continue">{{ (final_check_accessible(lpa) ? 'Save and return to final check' : 'Save and continue') }}</a>
        </div>

    {% else %}

        <div class="form-group">
            <a href="{{ addUrl }}" role="button" class="button js-form-popup" aria-label="Add Donor" data-cy="add-donor">Add donor</a>
        </div>

    {% endif %}

</li>

{% endblock %}
